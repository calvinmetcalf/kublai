<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>KUBLAI!</title>
        <meta name="description" content="Demo of leaflet">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="/leaflet/leaflet.css" />
        <!--[if lte IE 8]>
            <link rel="stylesheet" href="/leaflet/leaflet.ie.css" />
        <![endif]-->
        <script src="/leaflet/leaflet.js"></script>
        <script src="/leaflet/tilejson.js"></script>
        <script src="/leaflet/leaflet.utfgrid.js"><</script>
        <style>
            html { 
                height: 100% 
            }
            body { 
                height: 100%; 
                margin: 0; 
                padding: 0;
            }
            #map{ 
                height: 100% 
            }
        </style>
    </head>
    <body>
        <div id="map"></div>
        <script>
        var t;
        var init = function(tilejson){
        	t=tilejson
var popup = L.popup();
var m = L.TileJSON.createMap('map', tilejson);
if("grids" in tilejson){(function(){
	var utfGrid = new L.UtfGrid(tilejson.grids+"?callback={cb}",{resolution:4});
	m.addLayer(utfGrid);
	utfGrid.on('click', function (e) {
		if (e.data) {
			var content = [];
            for(key in e.data){
                content.push(key + ": " + e.data[key]);
            }
            popup.setLatLng(e.latlng).setContent(content.join("<br />")).openOn(m);
		} 
	}); var mapDiv = L.DomUtil.get("map");
	var oldStyle = mapDiv.getAttribute("style");
	utfGrid.on('mouseover', function (e) {
    	mapDiv.setAttribute("style", oldStyle + " cursor: pointer;")
	});
	utfGrid.on('mouseout', function (e) {
 		mapDiv.setAttribute("style", oldStyle)
	});
}())};
}
        </script>
        <script src="tile.jsonp?callback=init"></script>
    </body>
</html>